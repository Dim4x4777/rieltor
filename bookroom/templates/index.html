<%inherit file="base.html"/>
<%include file="forms/login-form.html"/>

<%block name='userName'>
    %if not session.get('loged_as'):
        <div ng-controller="AppCtrl">
            <a class="uk-link-reset" ng-click="openLoginForm()">Log in</a>
        </div>
    %else:
        <div ng-controller="HomeCtrl as userCtrl">
            <a class="uk-link-reset"
               href="#">${session.get('loged_as')['first_name']} ${session.get('loged_as')['last_name']}</a>
        </div>
    %endif
</%block>

<%block name='exitButton'>
    %if session.get('loged_as'):
        <li class="menu-button">
            <div>
                <a class="uk-link-reset" href="${request.route_path('logout')}">Exit</a>
            </div>
        </li>
    %endif
</%block>


<%block name='main'>
    <div ng-controller="HomeCtrl as home" class="uk-width-1-1 uk-height-1-1">
        <div class="uk-width-3-4 uk-height-1-1 uk-container-center uk-flex">
            <div class="home-menu-block uk-width-1-3 uk-height-1-1">
                <ul class="menu-list uk-flex uk-flex-column uk-margin-right main-menu"
                    data-uk-switcher="{connect:'#mainSwitcher'}">
                    <li class="uk-active uk-flex uk-flex-right"><h2 class="home-menu-element">Catalog</h2></li>
                    <li class="uk-flex uk-flex-right"><h2 class="home-menu-element">Users</h2></li>
                    %if request.has_permission('view'):
                        <li class="uk-flex uk-flex-right"><h2 class="home-menu-element">Test</h2></li>
                    %endif
                </ul>
            </div>
            <div class="home-menu-body uk-width-1-1 uk-height-1-1">
                <ul id="mainSwitcher" class="uk-switcher">
                    <li class=""><%include file="views/catalog.html"/></li>
                    <li class=""><%include file="views/users.html"/></li>
                </ul>
            </div>
        </div>
    </div>
</%block>